{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f299ef8e8b79bb52afe3","webpack:///./src/index.js","webpack:///./src/core.js","webpack:///./src/emitter.js","webpack:///./src/util.js","webpack:///./src/events.js","webpack:///./src/status.js","webpack:///./src/errors.js","webpack:///./src/filerequest.js","webpack:///./src/collector/dnd.js","webpack:///./src/html5/runtime.js","webpack:///./src/runtime.js","webpack:///./src/html5/transport.js","webpack:///./src/file.js","webpack:///./src/collector/paste.js","webpack:///./src/collector/picker.js","webpack:///./src/flash/runtime.js","webpack:///./src/flash/transport.js"],"names":["Core","require","Events","Status","File","UploadCore","VERSION","module","exports","Emitter","QueueLimitError","FilterError","DuplicateError","FileExtensionError","FileSizeError","formatSize","parseSize","normalizeAccept","FileRequest","DndCollector","PasteCollector","PickerCollector","REQUEST_OPTIONS","options","autoPending","auto","capcity","queueCapcity","multiple","accept","sizeLimit","fileSizeLimit","pending","Pending","processThreads","stat","Stat","constraints","Constraints","filters","Filters","addConstraint","getTotal","length","addFilter","file","some","item","extensions","indexOf","ext","size","preventDuplicate","getFiles","name","Array","isArray","fitlers","forEach","filter","request","key","hasOwnProperty","requestOptions","console","error","params","constraint","add","isLimit","emit","QUEUE_ERROR","QUEUE_FILE_FILTERED","setStatus","QUEUED","on","FILE_STATUS_CHANGE","status","CANCELLED","remove","PENDING","setTimeout","QUEUE_UPLOAD_START","QUEUE_STAT_CHANGE","PROCESS","QUEUE_UPLOAD_END","setCore","QUEUE_FILE_ADDED","getStat","flag","picker","dnd","paster","url","setSWF","Set","_set","shift","pop","slice","has","push","i","splice","files","toArray","getStatus","ret","fn","call","every","e","Error","toString","threads","heading","session","always","load","prepare","process","Deferred","event","listener","toLowerCase","_events","that","off","apply","arguments","listeners","emitter","propagationTarget","args","applyEmit","pArgs","unshift","data","HookInvoker","hooks","initialData","context","_data","_error","_aborted","promise","abort","fail","reject","done","resolve","setData","constructor","next","hook","res","then","parseFloat","prefixesSI","base","index","Math","floor","log","min","powedPrecision","pow","round","units","t","g","m","k","exec","u","ACCEPTs","images","title","audios","videos","normalizeExtensions","split","map","accepts","mimeTypes","createOptions","option","match","extend","target","source","isFunction","obj","ArrayFrom","from","arrayLike","Callbacks","firing","memory","fired","firingLength","firingIndex","firingStart","list","_this","stack","once","fire","stopOnFalse","disable","start","unique","empty","disabled","lock","locked","fireWith","func","tuples","state","deferred","fns","newDefer","tuple","returned","progress","notify","pipe","stateString","FILE_UPLOAD_START","FILE_UPLOAD_PREPARING","FILE_UPLOAD_PREPARED","CHUNK_UPLOAD_PREPARING","CHUNK_UPLOAD_COMPLETING","FILE_UPLOAD_PROGRESS","FILE_UPLOAD_END","FILE_UPLOAD_COMPLETING","FILE_UPLOAD_SUCCESS","FILE_UPLOAD_ERROR","FILE_UPLOAD_COMPLETED","FILE_CANCEL","ALL","INITED","PROGRESS","END","SUCCESS","ERROR","StatusName","_Error","message","AbortError","TimeoutError","NetworkError","ChunkResponse","rawResponse","chunkRequest","response","getResponse","getJson","JSON","parse","ChunkRequest","blob","fileRequest","getFile","getName","isMultiChunk","getParams","clone","getParam","value","setParam","getUrl","headers","getHeaders","isWithCredentials","getTimeout","FileResponse","getChunkRequest","Params","removeParam","addParam","param","single","encodeURIComponent","join","MIN_CHUNK_SIZE","action","withCredentials","timeout","chunkSize","chunkRetries","chunkEnable","chunkProcessThreads","retries","getChunkSize","getRuntime","canSlice","Runtime","MAX_NUM_ONCE","createReader","collector","dataTransfer","responders","items","times","_break","collect","readEntry","entry","isFile","isDirectory","readEntries","entries","l","webkitGetAsEntry","Area","area","areaElement","contains","allowed","Collectors","window","document","addEventListener","runtime","getInstance","started","enter","endTimer","dataTransferReader","total","responder","recieve","move","dropEffect","preventDefault","end","drag","clearTimeout","isLeave","type","drop","getData","ex","core","areas","destroy","removeAllListeners","r","isMultiple","Transport","instance","Html5Runtime","fr","FileReader","timer","onloadend","readyState","DONE","result","readAsDataURL","transport","Blob","prototype","mozSlice","webkitSlice","blobSlice","SparkMD5","chunks","ceil","chunk","spark","ArrayBuffer","loadNext","onload","append","readAsArrayBuffer","uploading","Uploading","getSource","useChunk","isChunkEnable","max","getChunkProcessThreads","slots","getActives","reduce","sum","slot","readChunk","req","createChunkRequest","setHeader","getChunkRetries","loaded","getCore","completion","getBlob","invoke","getTransport","generate","createChunkResponse","Html5Transport","xhr","XMLHttpRequest","timeoutTimer","clean","onerror","upload","onprogress","complete","responseText","statusText","open","header","setRequestHeader","formData","FormData","getBlobName","send","HTML5Runtime","uid","guid","toUpperCase","RE_EXT","RE_IMAGE","guessExt","guessType","Progress","change","percentage","filename","id","test","lastModified","Date","setPropagationTarget","silent","prevStatus","_dataUrlPromise","getAsDataUrl","_md5Promise","md5","_sessionPromise","_session","_flows","flow","createFileRequest","getUploading","createFileResponse","cancel","paste","clipboardData","prevent","addRet","kind","getAsFile","stopPropagation","removeEventListener","FlashRuntime","SWF_URL","createElement","div","html","innerHTML","firstChild","removeChild","FlashTriggerCollection","onFiles","overlay","getAccept","current","hideOverlay","body","appendChild","style","left","top","width","height","trigger","mouseover","rect","getBoundingClientRect","right","bottom","attachEvent","detachEvent","Html5Trigger","label","onChange","destroyInput","createInput","input","setAttribute","Html5TriggerCollection","FileList","triggerCollection","getFlashVersion","version","navigator","plugins","description","e1","ActiveXObject","GetVariable","e2","callFlash","movie","functionName","argumentArray","CallFunction","__flash__argumentsToXML","createFlash","swf","callInterface","attrs","_guid","prefix","display","w","offsetWidth","h","offsetHeight","flash","FlashTransport","flashRuntime"],"mappings":"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","file":"uploadcore.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UploadCore\"] = factory();\n\telse\n\t\troot[\"UploadCore\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f299ef8e8b79bb52afe3","const Core = require('./core');\nconst Events = require('./events');\nconst {Status} = require('./status');\nconst File = require('./file');\n\nCore.Events = Events;\nCore.Status = Status;\nCore.UploadCore = Core;\nCore.VERSION = VERSION;\nCore.Core = Core;\nCore.File = File;\n\nmodule.exports = Core;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const Emitter = require('./emitter');\nconst Events = require('./events');\nconst {Status} = require('./status');\nconst {QueueLimitError, FilterError, DuplicateError, FileExtensionError, FileSizeError} = require('./errors');\nconst {formatSize, parseSize, normalizeAccept} = require('./util');\nconst FileRequest = require('./filerequest');\nconst DndCollector = require('./collector/dnd');\nconst PasteCollector = require('./collector/paste');\nconst PickerCollector = require('./collector/picker');\n\nconst REQUEST_OPTIONS = ['name', 'url', 'params', 'action', 'data', 'headers', 'withCredentials', 'timeout', 'chunkEnable', 'chunkSize', 'chunkRetries', 'chunkProcessThreads'];\n\nclass Core extends Emitter {\n\n    constructor(options = {}) {\n        super();\n\n        this.autoPending = options.autoPending || options.auto;\n        this.capcity = options.capcity || options.queueCapcity || 0;\n        this.multiple = options.multiple == null ? true : options.multiple;\n\n        this.accept = normalizeAccept(options.accept);\n        this.sizeLimit = parseSize(options.sizeLimit || options.fileSizeLimit || 0);\n\n        this.pending = new Pending(options.processThreads);\n        this.stat = new Stat;\n        this.constraints = new Constraints;\n        this.filters = new Filters;\n\n        this.addConstraint(() => {\n            if (this.capcity > 0) {\n                return this.stat.getTotal() >= this.capcity\n            }\n            else {\n                return false;\n            }\n        });\n\n        if (this.accept && this.accept.length > 0) {\n            this.addFilter((file) => {\n                if (!this.accept.some((item) => {\n                    return item.extensions && item.extensions.indexOf(file.ext) > -1\n                }))\n                {\n                    return new FileExtensionError(file, 'extension \"' + file.ext + '\" is not allowed');\n                }\n            });\n        }\n\n        if (this.sizeLimit > 0) {\n            this.addFilter((file) => {\n                if (file.size > this.sizeLimit) {\n                    return new FileSizeError(file, 'filesize:' + formatSize(file.size) + ' is greater than limit:' + formatSize(this.sizeLimit));\n                }\n            });\n        }\n\n        if (options.preventDuplicate) {\n            this.addFilter((file) => {\n                if (this.stat.getFiles().some((item) => item.name === file.name && item.size === file.size)) {\n                    return new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n                }\n            });\n        }\n\n        if (Array.isArray(options.filters)) {\n            options.fitlers.forEach(filter => this.addFilter(filter));\n        }\n\n        let request = options.request || {};\n        REQUEST_OPTIONS.forEach((key) => {\n            if (options.hasOwnProperty(key)) {\n                request[key] = options[key];\n            }\n        });\n\n        this.requestOptions = request;\n    }\n\n    setOptions(options) {\n        if (typeof options === 'object' && !(options instanceof Array)) {\n            this.autoPending = options.autoPending || options.auto || this.autoPending;\n            this.capcity = options.capcity || options.queueCapcity || this.capcity;\n            this.sizeLimit = parseSize(options.sizeLimit || options.fileSizeLimit || this.sizeLimit);\n            let requestOptions = this.requestOptions\n            REQUEST_OPTIONS.forEach((key) => {\n                if (options.hasOwnProperty(key)) {\n                    requestOptions[key] = options[key];\n                }\n            });\n        }\n        else {\n            console && console.error('setOptions: type error, options should be an object/hashMap');\n        }\n    }\n\n    createFileRequest(file) {\n        if (typeof this.requestOptions.params === 'function'){\n            this.requestOptions.params = this.requestOptions.params();\n        }\n        return new FileRequest(file, this.requestOptions);\n    }\n\n    isLimit() {\n        return this.constraints.some();\n    }\n\n    addConstraint(constraint) {\n        return this.constraints.add(constraint);\n    }\n\n    addFilter(filter) {\n        return this.filters.add(filter);\n    }\n\n    add(file) {\n        if (this.isLimit()) {\n            this.emit(Events.QUEUE_ERROR, new QueueLimitError);\n            return -1;\n        }\n\n        let error = this.filters.filter(file);\n        if (!error && !this.stat.add(file)) {\n            error = new DuplicateError(file, 'file \"' + file.name + '\" already in queue');\n        }\n\n        if (error) {\n            this.emit(Events.QUEUE_FILE_FILTERED, file, error);\n            this.emit(Events.QUEUE_ERROR, error);\n            return 0;\n        }\n\n        file.setStatus(Status.QUEUED);\n\n        file.on(Events.FILE_STATUS_CHANGE, (status) => {\n            if (status === Status.CANCELLED) {\n                this.stat.remove(file);\n            } else if (status === Status.PENDING) {\n                setTimeout(() => {\n                    if (this.pending.add(file) && this.pending.size() === 1) {\n                        this.emit(Events.QUEUE_UPLOAD_START);\n                    }\n                }, 1);\n            }\n\n            this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n            if (this.stat.getFiles(Status.PROCESS).length < 1) {\n                this.emit(Events.QUEUE_UPLOAD_END);\n            }\n        });\n\n        file.setCore(this);\n\n        this.emit(Events.QUEUE_FILE_ADDED, file);\n\n        this.emit(Events.QUEUE_STAT_CHANGE, this.stat);\n\n        if (this.autoPending) {\n            file.pending();\n        }\n\n        return 1;\n    }\n\n    isMultiple() {\n        return this.multiple;\n    }\n\n    isFull() {\n        return this.capcity > 0 && this.getTotal() >= this.capcity;\n    }\n\n    isEmpty() {\n        return this.getTotal() < 1;\n    }\n\n    getAccept() {\n        return this.accept;\n    }\n\n    getStat() {\n        return this.stat;\n    }\n\n    getTotal() {\n        return this.getStat().getTotal();\n    }\n\n    getFiles(flag) {\n        return this.getStat().getFiles(flag);\n    }\n\n    stat(flag) {\n        return this.getStat().stat(flag);\n    }\n\n    static setSWF(url) {\n        PickerCollector.setSWF(url);\n    }\n\n    getPickerCollector() {\n        if (!this.picker) {\n            this.picker = new PickerCollector(this);\n        }\n        return this.picker;\n    }\n\n    getDndCollector() {\n        if (!this.dnd) {\n            this.dnd = new DndCollector(this);\n        }\n        return this.dnd;\n    }\n\n    getPasteCollector() {\n        if (!this.paster) {\n            this.paster = new PasteCollector(this);\n        }\n        return this.paster;\n    }\n}\n\nmodule.exports = Core;\n\nclass Set {\n    constructor() {\n        this._set = [];\n    }\n\n    /**\n     * \n     *\n     * @returns {Number}\n     */\n    size() {\n        return this._set.length;\n    }\n\n    /**\n     * \n     *\n     * @returns {*}\n     */\n    shift() {\n        return this._set.shift();\n    }\n\n    /**\n     * \n     *\n     * @returns {*}\n     */\n    pop() {\n        return this._set.pop();\n    }\n\n    /**\n     * \n     *\n     * @returns {Array}\n     */\n    toArray() {\n        return this._set.slice(0);\n    }\n\n    /**\n     * \n     *\n     * @param item\n     * @returns {boolean} success if true\n     */\n    add(item) {\n        if (this.has(item)) {\n            return false;\n        }\n        this._set.push(item);\n        return true;\n    }\n\n    /**\n     * \n     *\n     * @param item\n     * @returns {boolean}\n     */\n    has(item) {\n        return this._set.indexOf(item) > -1;\n    }\n\n    /**\n     * \n     *\n     * @returns {boolean} success if true\n     */\n    remove(item) {\n        var i = this._set.indexOf(item);\n        if (i > -1) {\n            this._set.splice(i, 1);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * \n     */\n    clear() {\n        this._set = [];\n    }\n}\n\nclass Stat {\n    constructor() {\n        this.files = new Set;\n    }\n    add(file) {\n        return this.files.add(file);\n    }\n    remove(file) {\n        this.files.remove(file);\n    }\n    getTotal() {\n        return this.files.size();\n    }\n    getFiles(flag) {\n        var files = this.files.toArray();\n        if (!flag) {\n            return files;\n        }\n        return files.filter((file) => {\n            return !!(file.getStatus() & flag);\n        });\n    }\n    stat(flag) {\n        let ret = {}, files = this.getFiles(flag);\n\n        files.forEach((file) => {\n            let status = file.getStatus();\n            ret[status] = (status in ret) ?  (ret[status] + 1) : 1;\n        });\n\n        ret['sum'] = files.length;\n\n        return ret;\n    }\n}\n\nclass Constraints {\n    constructor() {\n        this.constraints = new Set;\n    }\n\n    add(constraint) {\n        this.constraints.add(constraint);\n        return this;\n    }\n\n    remove(constraint) {\n        this.constraints.remove(constraint);\n        return this;\n    }\n\n    some() {\n        return this.constraints.toArray().some((fn) => fn.call(this));\n    }\n}\n\nclass Filters {\n    constructor() {\n        this.filters = new Set;\n    }\n\n    add(filter) {\n        this.filters.add(filter);\n        return this;\n    }\n\n    remove(filter) {\n        this.filters.remove(filter);\n        return this;\n    }\n\n    filter(file) {\n        let error = null;\n        this.filters.toArray().every((filter) => {\n            let ret;\n            try {\n                ret = filter(file);\n            } catch (e) {\n                ret = e;\n            }\n            if (typeof ret === 'string') {\n                error = new FilterError(file, ret);\n                return false;\n            } else if (ret instanceof Error) {\n                error = ret instanceof FilterError ? ret : new FilterError(file, ret.toString());\n                return false;\n            }\n            return true;\n        });\n        return error;\n    }\n}\n\nclass Pending {\n    constructor(threads) {\n        this.threads = threads || 2;\n        this.heading = new Set;\n        this.pending = new Set;\n    }\n\n    add(file) {\n        if (!this.pending.add(file)) return false;\n\n        file.session().always(() => this.pending.remove(file));\n\n        this.load();\n\n        return true;\n    }\n\n    size() {\n        return this.pending.size() + this.heading.size();\n    }\n\n    process(file) {\n        if (!this.heading.add(file)) return;\n\n        file.session().always(() => {\n            this.heading.remove(file);\n            this.load();\n        });\n    }\n\n    load () {\n        var file;\n        while (this.heading.size() < this.threads && (file = this.pending.shift())) {\n            if (file.prepare()) {\n                this.process(file);\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","const {Deferred} = require('./util');\n\nclass Emitter {\n\n    on(event, listener) {\n        event = event.toLowerCase();\n        if (!this._events) {\n            this._events = {};\n        }\n\n        if (!this._events[event]) {\n            this._events[event] = [];\n        }\n\n        this._events[event].push(listener);\n\n        return this;\n    }\n\n    once(event, listener) {\n        event = event.toLowerCase();\n\n        let that = this;\n\n        function fn() {\n            that.off(event, fn);\n            listener.apply(this, arguments);\n        }\n\n        fn.listener = listener;\n\n        this.on(event, fn);\n\n        return this;\n    }\n\n    off(event, listener) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            return this;\n        }\n\n        let i = listeners.length;\n        while (i-- > 0) {\n            if (listeners[i] === listener || listeners[i].listener === listener) {\n                listeners.splice(i, 1);\n                break;\n            }\n        }\n\n        if (listeners.length === 0) {\n            delete this._events[event];\n        }\n\n        return this;\n    }\n\n    removeAllListeners(event) {\n        if (!event) {\n            this._events = {};\n        } else {\n            delete this._events[event.toLowerCase()];\n        }\n\n        return this;\n    }\n\n    setPropagationTarget(emitter) {\n        if (emitter instanceof Emitter) {\n            this.propagationTarget = emitter;\n        }\n    }\n\n    emit(event, ...args) {\n        this.applyEmit(event, args);\n    }\n\n    applyEmit(event, args) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (this._events && (listeners = this._events[event])) {\n            listeners.slice(0).forEach((fn) => {\n                if (listeners.indexOf(fn) !== -1) {\n                    fn.apply(this, args)\n                }\n            });\n        }\n\n        if (this.propagationTarget) {\n            const pArgs = args.slice(0);\n            pArgs.unshift(this);\n            this.propagationTarget.applyEmit(event, pArgs);\n        }\n\n        return this;\n    }\n\n    invoke(event, data) {\n        event = event.toLowerCase();\n\n        let listeners;\n\n        if (!this._events || !(listeners = this._events[event])) {\n            listeners = [];\n        }\n\n        return HookInvoker(listeners.slice(0), data, this);\n    }\n}\n\nmodule.exports = Emitter;\n\nfunction HookInvoker(hooks, initialData, context) {\n    let _data = initialData;\n    let _error = null;\n    let _aborted;\n\n    const i = Deferred();\n    const ret = i.promise();\n\n    ret.abort = () => {\n        _aborted = true;\n    };\n\n    const fail = (e) => {\n        if (_aborted) return;\n        if (e) {\n            _error = e instanceof Error ? e : new Error(e);\n        }\n        i.reject(_error || new Error('Unknown'));\n    };\n\n    const done = () => {\n        if (_aborted) return;\n        if (_error != null) {\n            fail();\n        } else {\n            i.resolve(_data);\n        }\n    };\n\n    const setData = (data) => {\n        if (data != null && (_data == null || data.constructor === _data.constructor)) {\n            _data = data;\n        }\n    };\n\n    const next = (data) => {\n        if (_aborted) return;\n\n        if (data instanceof Error) {\n            _error = data;\n        }\n\n        if (_error != null) {\n            return fail();\n        }\n\n        setData(data);\n\n        const hook = hooks.shift();\n        if (!hook) {\n            return done();\n        }\n        let res;\n        try {\n            res = hook.call(context, _data);\n        } catch (e) {\n            return fail(e);\n        }\n\n        if (res && res.then) {\n            res.then(next, fail);\n        } else {\n            next(res);\n        }\n    };\n\n    setTimeout(next, 1);\n\n    return ret;\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/emitter.js","exports.formatSize = function (size) {\n    size = parseFloat(size);\n    const prefixesSI = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],\n        base = 1024;\n    let index = size ? Math.floor(Math.log(size) / Math.log(base)) : 0;\n    index = Math.min(index, prefixesSI.length - 1);\n    let powedPrecision = Math.pow(10, index < 2 ? 0 : (index > 2 ? 2 : 1));\n    size = size / Math.pow(base, index);\n    size = Math.round(size * powedPrecision) / powedPrecision;\n    return size + prefixesSI[index] + 'B';\n};\n\nexports.parseSize = function (size) {\n    if (typeof size !== 'string') {\n        return size;\n    }\n\n    const units = {\n        t: 1099511627776,\n        g: 1073741824,\n        m: 1048576,\n        k: 1024\n    };\n\n    size = /^([0-9\\.]+)([tgmk]?)b?$/i.exec(size);\n    const u = size[2];\n    size = +size[1];\n\n    if (units.hasOwnProperty(u)) {\n        size *= units[u];\n    }\n    return size;\n};\n\nconst ACCEPTs = {\n    images: {\n        title: 'Images',\n        extensions: ['jpg', 'jpeg', 'gif', 'png', 'bmp', 'svg', 'tiff', 'tif', 'ico', 'jpe', 'svgz', 'pct', 'psp', 'ai', 'psd', 'raw', 'webp']\n    },\n\n    audios: {\n        title: 'Audios',\n        extensions: ['aac', 'aif', 'flac', 'iff', 'm4a', 'm4b', 'mid', 'midi', 'mp3', 'mpa', 'mpc', 'oga', 'ogg', 'ra', 'ram', 'snd', 'wav', 'wma']\n    },\n\n    videos: {\n        title: 'Videos',\n        extensions: ['avi', 'divx', 'flv', 'm4v', 'mkv', 'mov', 'mp4', 'mpeg', 'mpg', 'ogm', 'ogv', 'ogx', 'rm', 'rmvb', 'smil', 'webm', 'wmv', 'xvid']\n    }\n};\n\nfunction normalizeExtensions(extensions) {\n    if (typeof extensions !== 'string') {\n        return '';\n    }\n\n    return extensions.toLowerCase().split(/ *[ ,;|+] */).map((ext) => {\n        let m = /^\\*?\\.?(\\w+)$/.exec(ext);\n        return m ? m[1] : null;\n    }).filter(ext => ext !== null);\n}\n\nfunction normalizeAccept(accepts) {\n    if (!accepts) return null;\n\n    if (!Array.isArray(accepts)) {\n        accepts = [accepts];\n    }\n\n    return accepts.map((accept) => {\n        if (typeof accept === 'string' && (accept = accept.toLowerCase()) && ACCEPTs.hasOwnProperty(accept)) {\n            return ACCEPTs[accept];\n        } else {\n            let extensions = normalizeExtensions(accept.extensions || accept);\n\n            return extensions.length ? {\n                title: accept.title || '',\n                extensions: extensions,\n                mimeTypes: accept.mimeTypes || ''\n            } : null;\n        }\n    }).filter(accept => accept !== null);\n}\n\nexports.normalizeAccept = normalizeAccept;\n\n    function createOptions(option) {\n    const options = {};\n    (option.match(/\\S+/g) || []).forEach((flag) => {\n        options[flag] = true;\n    });\n    return options;\n}\n\nfunction extend(target, source) {\n    for (let key in source) {\n        target[key] = source[key];\n    }\n    return target;\n}\n\nexports.extend = extend;\n\nfunction isFunction(obj) {\n    return typeof obj === 'function';\n}\n\nconst ArrayFrom = Array.from || function (arrayLike) {\n    return [].slice.call(arrayLike);\n};\n\nfunction Callbacks(options) {\n    options = typeof options === \"string\"\n        ? createOptions(options)\n        : extend({}, options);\n\n    let firing, memory, fired, firingLength, firingIndex, firingStart,\n        list = [], _this,\n        stack = !options.once && [],\n        fire = function (data) {\n            memory = options.memory && data;\n            fired = true;\n            firingIndex = firingStart || 0;\n            firingStart = 0;\n            firingLength = list.length;\n            firing = true;\n            for (; list && firingIndex < firingLength; firingIndex++) {\n                if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {\n                    memory = false; // To prevent further calls using add\n                    break;\n                }\n            }\n            firing = false;\n            if (list) {\n                if (stack) {\n                    if (stack.length) {\n                        fire(stack.shift());\n                    }\n                } else if (memory) {\n                    list = [];\n                } else {\n                    _this.disable();\n                }\n            }\n        };\n\n    _this = {\n        add() {\n            if (list) {\n                let start = list.length;\n\n                (function add(args) {\n                    args.forEach((fn) => {\n                        if (isFunction(fn)) {\n                            if (!options.unique || !_this.has(fn)) {\n                                list.push(fn);\n                            }\n                        } else if (Array.isArray(fn)) {\n                            add(fn);\n                        }\n                    });\n                })(ArrayFrom(arguments));\n\n                if (firing) {\n                    firingLength = list.length;\n                } else if (memory) {\n                    firingStart = start;\n                    fire(memory);\n                }\n            }\n            return this;\n        },\n\n        remove() {\n            if (list) {\n                ArrayFrom(arguments).forEach((fn) => {\n                    let i = list.length;\n                    while (--i >= 0) {\n                        if (list[i] !== fn) continue;\n\n                        list.splice(i, 1);\n\n                        if (firing) {\n                            if (i <= firingLength) {\n                                firingLength--;\n                            }\n                            if (i <= firingIndex) {\n                                firingIndex--;\n                            }\n                        }\n                    }\n                });\n            }\n            return this;\n        },\n\n        has(fn) {\n            return fn ? list.indexOf(fn) > -1 : !!(list && list.length);\n        },\n\n        empty() {\n            list = [];\n            firingLength = 0;\n            return this;\n        },\n\n        disable() {\n            list = stack = memory = null;\n            return this;\n        },\n\n        disabled() {\n            return !list;\n        },\n\n        lock() {\n            stack = null;\n            if (!memory) {\n                _this.disable();\n            }\n            return this;\n        },\n\n        locked() {\n            return !stack;\n        },\n\n        fireWith(context, args) {\n            if (list && (!fired || stack)) {\n                args = args || [];\n                args = [context, args.slice ? args.slice() : args];\n                if (firing) {\n                    stack.push(args);\n                } else {\n                    fire(args);\n                }\n            }\n            return this;\n        },\n\n        fire() {\n            _this.fireWith(this, arguments);\n            return this;\n        },\n\n        fired() {\n            return !!fired;\n        }\n    };\n\n    return _this;\n};\n\nfunction Deferred(func) {\n    let tuples = [\n        [\"resolve\", \"done\", Callbacks(\"once memory\"), \"resolved\"],\n        [\"reject\", \"fail\", Callbacks(\"once memory\"), \"rejected\"],\n        [\"notify\", \"progress\", Callbacks(\"memory\")]\n    ],\n    state = \"pending\",\n    promise = {\n        state() {\n            return state;\n        },\n\n        always() {\n            const args = ArrayFrom(arguments);\n            deferred.done(args).fail(args);\n            return this;\n        },\n\n        then(/* fnDone, fnFail, fnProgress */) {\n            let fns = arguments;\n            return Deferred((newDefer) => {\n                tuples.forEach((tuple, i) => {\n                    let fn = isFunction(fns[i]) && fns[i];\n                    deferred[tuple[1]](function () {\n                        const returned = fn && fn.apply(this, arguments);\n                        if (returned && isFunction(returned.promise)) {\n                            returned.promise()\n                                .done(newDefer.resolve)\n                                .fail(newDefer.reject)\n                                .progress(newDefer.notify);\n                        } else {\n                            newDefer[tuple[0] + \"With\"](\n                                this === promise ? newDefer.promise() : this,\n                                fn ? [returned] : arguments\n                            );\n                        }\n                    });\n                });\n                fns = null;\n            }).promise();\n        },\n\n        promise(obj) {\n            return obj != null ? extend(obj, promise) : promise;\n        }\n    }, deferred = {};\n\n    promise.pipe = promise.then;\n\n    tuples.forEach((tuple, i) => {\n        let list = tuple[2],\n            stateString = tuple[3];\n\n        promise[tuple[1]] = list.add;\n\n        if (stateString) {\n            list.add(\n                () => { state = stateString; },\n                tuples[i^1][2].disable,\n                tuples[2][2].lock\n            );\n        }\n\n        deferred[tuple[0]] = function () {\n            deferred[tuple[0] + \"With\"](this === deferred ? promise : this, arguments);\n            return this;\n        };\n\n        deferred[tuple[0] + \"With\"] = list.fireWith;\n    });\n\n    promise.promise(deferred);\n\n    if (func) {\n        func.call(deferred, deferred);\n    }\n\n    return deferred;\n}\n\nexports.Deferred = Deferred;\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","module.exports = {\n    QUEUE_UPLOAD_START: 'queueuploadstart', // \n    QUEUE_UPLOAD_END: 'queueuploadend', // \n    QUEUE_FILE_ADDED: 'queuefileadded', // \n    QUEUE_FILE_FILTERED: 'queuefilefiltered', // \n    QUEUE_ERROR: 'queueerror', // \n    QUEUE_STAT_CHANGE: 'statchange', // \n\n    FILE_UPLOAD_START: 'fileuploadstart', // \n    FILE_UPLOAD_PREPARING: 'fileuploadpreparing', // \n    FILE_UPLOAD_PREPARED: 'fileuploadprepared', // \n    CHUNK_UPLOAD_PREPARING: 'chunkuploadpreparing', // \n    CHUNK_UPLOAD_COMPLETING: 'chunkuploadcompleting', // \n    FILE_UPLOAD_PROGRESS: 'fileuploadprogress', // \n    FILE_UPLOAD_END: 'fileuploadend', // \n    FILE_UPLOAD_COMPLETING: 'fileuploadcompleting', // \n    FILE_UPLOAD_SUCCESS: 'fileuploadsuccess', // \n    FILE_UPLOAD_ERROR: 'fileuploaderror', // \n    FILE_UPLOAD_COMPLETED: 'fileuploadcompleted', // \n\n    FILE_CANCEL: 'filecancel', // \n    FILE_STATUS_CHANGE: 'filestatuschange' // \n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/events.js","exports.Status = {\n    ALL: 255, // \n\n    PROCESS: 31, // INITED -> END\n    INITED: 1, // \n    QUEUED: 2, // \n    PENDING: 4, // \n    PROGRESS: 8, // \n    END: 16, // , \n\n    SUCCESS: 32,  // \n    ERROR: 64, // \n    CANCELLED: 128  //   queued , \n};\n\nexports.StatusName = {\n    1: 'inited',\n    2: 'queued',\n    4: 'pending',\n    8: 'progress',\n    16: 'end',\n    32: 'success',\n    64: 'error',\n    128: 'cancelled'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/status.js","class _Error extends Error {\n    constructor(message) {\n        super(message);\n        this.message = message;\n    }\n}\n\nclass AbortError extends _Error {\n    constructor(message) {\n        super(message);\n        this.name = 'AbortError';\n    }\n}\n\nclass TimeoutError extends _Error {\n    constructor(message) {\n        super(message);\n        this.name = 'TimeoutError';\n    }\n}\n\nclass NetworkError extends _Error {\n    constructor(status, message) {\n        super(message);\n        this.name = 'NetworkError';\n        this.status = status;\n    }\n}\n\nclass QueueLimitError extends _Error {\n    constructor() {\n        super('queue limit');\n        this.name = 'QueueLimitError';\n    }\n}\n\nclass FilterError extends _Error {\n    constructor(file, message) {\n        super(message);\n        this.name = 'FilterError';\n        this.file = file;\n    }\n}\n\nclass DuplicateError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'DuplicateError';\n    }\n}\n\nclass FileExtensionError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileExtensionError';\n    }\n}\n\nclass FileSizeError extends FilterError {\n    constructor(file, message) {\n        super(file, message);\n        this.name = 'FileSizeError';\n    }\n}\n\n\nmodule.exports = {AbortError, TimeoutError, NetworkError,\n    QueueLimitError, FilterError, DuplicateError, FileExtensionError, FileSizeError};\n\n\n\n// WEBPACK FOOTER //\n// ./src/errors.js","const {parseSize} = require('./util');\n\nclass ChunkResponse {\n    /**\n     * @param {string|null} rawResponse\n     * @param {ChunkRequest} chunkRequest\n     */\n    constructor(rawResponse, chunkRequest) {\n        this.rawResponse = rawResponse;\n        this.chunkRequest = chunkRequest;\n    }\n\n    getChunkRequest() {\n        return this.chunkRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        return this.response || this.rawResponse;\n    }\n\n    getJson() {\n        const response = this.getResponse();\n        if (response == null) {\n            return null;\n        }\n        if (typeof response.getJson === 'function') {\n            return response.getJson();\n        }\n        if (typeof response === 'string') {\n            return response === '' ? null : JSON.parse(response);\n        }\n        return response;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass ChunkRequest {\n    /**\n     *\n     * @param {int} index\n     * @param {Blob} blob\n     * @param {FileRequest} fileRequest\n     */\n    constructor(index, blob, fileRequest) {\n        this.index = index || 0;\n        this.fileRequest = fileRequest;\n        this.blob = blob || fileRequest.getFile().source;\n    }\n\n    getName() {\n        return this.fileRequest.getName();\n    }\n\n    getFile() {\n        return this.fileRequest.getFile();\n    }\n\n    getBlob() {\n        return this.blob;\n    }\n\n    getBlobName() {\n        return this.isMultiChunk() ? (this.blob.name || 'blob') : this.getFile().name;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n\n    isMultiChunk() {\n        return this.getFile().source !== this.blob;\n    }\n\n    getParams() {\n        if (!this.params) {\n            this.params = this.fileRequest.getParams().clone();\n        }\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.getParams().setParam(name, value);\n\n        return this;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getUrl() {\n        return this.url || this.fileRequest.getUrl();\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getHeaders() {\n        if (!this.headers) {\n            this.headers = this.fileRequest.getHeaders().slice(0);\n        }\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        var headers = this.getHeaders();\n        headers.push({name: name, value: value});\n        return this;\n    }\n\n    isWithCredentials() {\n        return this.fileRequest.isWithCredentials();\n    }\n\n    getTimeout() {\n        return this.fileRequest.getTimeout();\n    }\n\n    createChunkResponse(response) {\n        return new ChunkResponse(response, this);\n    }\n}\n\nclass FileResponse {\n    /**\n     * @param {ChunkResponse|Object|string} rawResponse\n     * @param {FileRequest} fileRequest\n     */\n    constructor(rawResponse, fileRequest) {\n        this.rawResponse = rawResponse;\n        this.fileRequest = fileRequest;\n    }\n\n    isFromMultiChunkResponse() {\n        if (this.rawResponse instanceof ChunkResponse) {\n            return this.rawResponse.getChunkRequest().isMultiChunk();\n        }\n        return false;\n    }\n\n    getFileRequest() {\n        return this.fileRequest;\n    }\n\n    getRawResponse() {\n        return this.rawResponse;\n    }\n\n    getResponse() {\n        if (this.response != null) {\n            return this.response;\n        }\n        if (this.rawResponse instanceof ChunkResponse) {\n            return this.rawResponse.getResponse();\n        } else {\n            return this.rawResponse;\n        }\n    }\n\n    getJson() {\n        const response = this.getResponse();\n        if (response == null) {\n            return null;\n        }\n        if (typeof response.getJson === 'function') {\n            return response.getJson();\n        }\n        if (typeof response === 'string') {\n            return response === '' ? null : JSON.parse(response);\n        }\n        return response;\n    }\n\n    setResponse(response) {\n        this.response = response;\n        return this;\n    }\n}\n\nclass Params {\n    constructor(params) {\n        if (Array.isArray(params)) {\n            this.params = params.slice(0);\n        } else if (typeof params === 'object') {\n            this.params = [];\n            for (let name in params) {\n                if (params.hasOwnProperty(name)) {\n                    this.params.push({name, value: params[name]});\n                }\n            }\n        } else {\n            this.params = [];\n        }\n    }\n\n    setParam(name, value) {\n        this.removeParam(name);\n        this.addParam(name, value);\n    }\n\n    addParam(name, value) {\n        this.params.push({name, value});\n    }\n\n    removeParam(name) {\n        this.params = this.params.filter((param) => param.name !== name);\n    }\n\n    getParam(name, single) {\n        let ret = this.params.filter((param) => param.name === name)\n            .map((param) => param.value);\n\n        if (single) {\n            return ret.shift();\n        }\n\n        return ret;\n    }\n\n    clone() {\n        return new Params(this.params);\n    }\n\n    toArray() {\n        return this.params;\n    }\n\n    toString() {\n        const params = this.params.map((param) => {\n            return encodeURIComponent(param.name) + '=' + (param.value == null ? '' : encodeURIComponent(param.value));\n        });\n\n        return params.join('&'); //.replace( /%20/g, '+');\n    }\n}\n\nconst MIN_CHUNK_SIZE = 256 * 1024; // 256K\n\nclass FileRequest {\n    constructor(file, options = {}) {\n        this.file = file;\n        this.name = options.name || 'file';\n        this.url = options.url || options.action;\n        this.params = new Params(options.params || options.data);\n        this.headers = options.headers || [];\n        this.withCredentials = options.withCredentials;\n        this.timeout = options.timeout || 0;\n        this.chunkSize = options.chunkSize || 0;\n        this.chunkRetries = options.chunkRetries || 0;\n        this.chunkEnable = options.chunkEnable || false;\n        this.chunkProcessThreads = options.chunkProcessThreads || 2;\n    }\n\n    getFile() {\n        return this.file;\n    }\n\n    getUrl() {\n        return this.url || '';\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    setName(name) {\n        this.name = name;\n        return this;\n    }\n\n    setUrl(url) {\n        this.url = url;\n        return this;\n    }\n\n    getParams() {\n        return this.params;\n    }\n\n    getParam(name) {\n        return this.getParams().getParam(name);\n    }\n\n    setParam(name, value) {\n        this.params.setParam(name, value);\n        return this;\n    }\n\n    getHeaders() {\n        return this.headers;\n    }\n\n    setHeader(name, value) {\n        this.headers.push({name: name, value: value});\n    }\n\n    isWithCredentials() {\n        return this.withCredentials;\n    }\n\n    setWithCredentials(flag) {\n        this.withCredentials = flag;\n        return this;\n    }\n\n    getTimeout() {\n        return this.timeout;\n    }\n\n    setTimeout(timeout) {\n        this.timeout = timeout;\n        return this;\n    }\n\n    getChunkSize() {\n        return parseSize(this.chunkSize);\n    }\n\n    setChunkSize(chunkSize) {\n        this.chunkSize = chunkSize;\n        return this;\n    }\n\n    getChunkRetries() {\n        return this.chunkRetries;\n    }\n\n    setChunkRetries(retries) {\n        this.chunkRetries = retries;\n        return 0;\n    }\n\n    isChunkEnable() {\n        const chunkSize = this.getChunkSize();\n        return this.chunkEnable && chunkSize > MIN_CHUNK_SIZE\n            && this.file.getRuntime().canSlice() && this.file.size > chunkSize;\n    }\n\n    setChunkEnable(flag) {\n        this.chunkEnable = flag;\n        return this;\n    }\n\n    getChunkProcessThreads() {\n        return this.chunkProcessThreads;\n    }\n\n    setChunkProcessThreads(threads) {\n        this.chunkProcessThreads = threads;\n        return this;\n    }\n\n    createChunkRequest(index, blob) {\n        return new ChunkRequest(index, blob, this);\n    }\n\n    createFileResponse(response) {\n        return new FileResponse(response, this);\n    }\n}\n\nmodule.exports = FileRequest;\n\n\n// WEBPACK FOOTER //\n// ./src/filerequest.js","const Emitter = require('../emitter');\nconst Runtime = require('../html5/runtime');\nconst File = require('../file');\n\nconst MAX_NUM_ONCE = 100;\n\nfunction createReader(collector) {\n    return (dataTransfer, responders) => {\n        const items = dataTransfer.items,\n            files = dataTransfer.files;\n        let item, times = MAX_NUM_ONCE;\n        let _break = false;\n\n        function collect(file) {\n            if (--times < 0 || !collector(file, responders)) {\n                _break = true;\n                return false;\n            }\n            return true;\n        }\n\n        function readEntry(entry) {\n            if (_break) return;\n            if (entry.isFile) {\n                entry.file((file) => {\n                    if (!_break) {\n                        collect(file);\n                    }\n                });\n            } else if (entry.isDirectory) {\n                entry.createReader().readEntries((entries) => {\n                    if (_break) return;\n                    for (let i = 0, l = entries.length; i < l; i++) {\n                        if (_break) break;\n                        readEntry(entries[i]);\n                    }\n                });\n            }\n        }\n\n        for (let i = 0, l = files.length; i < l; i++) {\n            if (_break) break;\n            item = items && items[i];\n\n            let entry = item && item.webkitGetAsEntry && item.webkitGetAsEntry();\n\n            if (entry && entry.isDirectory) {\n                readEntry(entry);\n            } else {\n                if (!collect(files[i])) {\n                    break;\n                }\n            }\n        }\n    }\n}\n\nclass Area extends Emitter {\n    constructor(area) {\n        super();\n\n        this.areaElement = area;\n    }\n\n    contains(target) {\n        return this.areaElement.contains(target);\n    }\n\n    start(e, allowed) {\n        this.emit('start', e, allowed);\n    }\n\n    response(e, allowed) {\n        allowed = allowed && this.contains(e.target);\n        this.emit('response', e, allowed);\n        return allowed;\n    }\n\n    end(e) {\n        this.emit('end', e);\n    }\n}\n\nconst Collectors = [];\n\nfunction prepare() {\n    if (!('DataTransfer' in window) || !('FileList' in window) || !document.addEventListener) {\n        return;\n    }\n\n    const runtime = Runtime.getInstance();\n\n    let started = 0, enter = 0, endTimer;\n    const dataTransferReader = createReader((file, responders) => {\n        if (!responders || responders.length < 1) {\n            return false;\n        }\n        file = new File(runtime, file);\n        let total = responders.length;\n        return responders.some((responder) => {\n            const ret = responder.recieve(file);\n            if (ret > 0) {\n                return true;\n            }\n            if (ret < 0) {\n                total -= 1;\n            }\n            return false;\n        }) || total > 0;\n    });\n\n    const start = (e) => {\n        started = 1;\n        Collectors.forEach((responder) => responder.start(e));\n    };\n\n    const move = (e) => {\n        const has = Collectors.filter(responder => responder.response(e)).length > 0;\n\n        const dataTransfer = e.dataTransfer;\n\n        if (dataTransfer) {\n            dataTransfer.dropEffect = has ? 'copy' : 'none';\n        }\n        e.preventDefault();\n    };\n\n    const end = (e) => {\n        started = 0;\n        enter = 0;\n        Collectors.forEach((responder) => responder.end(e));\n    };\n\n    const drag = (e) => {\n        clearTimeout(endTimer);\n        let isLeave = e.type === 'dragleave';\n        if (!isLeave && !started) {\n            start(e);\n        }\n        move(e);\n        if (isLeave) {\n            endTimer = setTimeout(() => end(e), 100);\n        }\n    };\n    const drop = (e) => {\n        e.preventDefault();\n\n        clearTimeout(endTimer);\n        end(e);\n\n        const responders = Collectors.filter((responder) => responder.contains(e.target));\n\n        if (responders.length < 1) {\n            return;\n        }\n\n        let dataTransfer = e.dataTransfer;\n\n        try {\n            if (dataTransfer.getData('text/html')) {\n                return;\n            }\n        } catch (ex) {}\n\n        dataTransferReader(dataTransfer, responders);\n    };\n\n    document.addEventListener('dragenter', drag, false);\n    document.addEventListener('dragover', drag, false);\n    document.addEventListener('dragleave', drag, false);\n    document.addEventListener('drop', drop, false);\n}\n\nclass DndCollector {\n\n    constructor(core) {\n        if (Collectors.length < 1) {\n            prepare();\n        }\n        Collectors.push(this);\n\n        this.core = core;\n        this.areas = [];\n    }\n\n    addArea(area) {\n        area = new Area(area);\n        this.areas.push(area);\n        area.destroy = () => {\n            area.removeAllListeners();\n            let i = this.areas.indexOf(area);\n            if (i > -1) {\n                this.areas.splice(i, 1);\n            }\n        };\n\n        return area;\n    }\n\n    contains(target) {\n        return this.areas.some((area) => area.contains(target));\n    }\n\n    start(e) {\n        this.areas.forEach((area) => area.start(e));\n    }\n\n    response(e) {\n        return this.areas.map((area) => area.response(e)).some(r => r !== false);\n    }\n\n    recieve(file) {\n        const ret = this.core.add(file);\n        if (ret > 0 && !this.core.isMultiple()) {\n            return -1;\n        } else {\n            return ret;\n        }\n    }\n\n    end(e) {\n        this.areas.forEach((area) => area.end(e));\n    }\n}\n\nmodule.exports = DndCollector;\n\n\n// WEBPACK FOOTER //\n// ./src/collector/dnd.js","const Runtime = require('../runtime');\nconst {Deferred} = require('../util');\nconst Transport = require('./transport');\n\nlet instance;\n\nclass Html5Runtime extends Runtime {\n    static getInstance() {\n        if (!instance) {\n            instance = new Html5Runtime;\n        }\n        return instance;\n    }\n\n    getAsDataUrl(blob, timeout) {\n        let i = Deferred(),\n            fr = new FileReader, timer;\n\n        fr.onloadend = () => {\n            if (fr.readyState == FileReader.DONE) {\n                i.resolve(fr.result);\n            } else {\n                i.reject();\n            }\n            clearTimeout(timer);\n            fr.onloadend = null;\n        };\n        fr.readAsDataURL(blob);\n\n        let abort = () => {\n            fr && fr.abort();\n            fr = null;\n        };\n        if (timeout) {\n            timer = setTimeout(abort, timeout);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    getTransport() {\n        if (!this.transport) {\n            this.transport = new Transport(this);\n        }\n        return this.transport;\n    }\n\n    canSlice() {\n        return !!(Blob.prototype.slice || Blob.prototype.mozSlice || Blob.prototype.webkitSlice);\n    }\n\n    slice(blob, start, end) {\n        let blobSlice = blob.slice || blob.mozSlice || blob.webkitSlice;\n\n        return blobSlice.call(blob, start, end);\n    }\n\n    md5(blob) {\n        const i = Deferred();\n\n        if (!window.SparkMD5) {\n            i.reject();\n            return i.promise();\n        }\n\n        let chunkSize = 2 * 1024 * 1024,\n            chunks = Math.ceil(blob.size / chunkSize),\n            chunk = 0,\n            spark = new SparkMD5.ArrayBuffer(),\n            blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice;\n\n        let fr = new FileReader;\n\n        var loadNext = () => {\n            if (!fr) return;\n            let start, end;\n\n            start = chunk * chunkSize;\n            end = Math.min(start + chunkSize, blob.size);\n\n            fr.onload = () => {\n                spark && spark.append(fr.result);\n            };\n\n            fr.onloadend = () => {\n                if (!fr) return;\n                if (fr.readyState == FileReader.DONE) {\n                    if (++chunk < chunks) {\n                        setTimeout(loadNext, 1);\n                    } else {\n                        setTimeout(() => {\n                            spark && i.resolve(spark.end());\n                            loadNext = blob = spark = null;\n                        }, 50);\n                    }\n                } else {\n                    i.reject();\n                }\n                fr.onloadend = fr.onload = null;\n            };\n\n            fr.readAsArrayBuffer(blobSlice.call(blob, start, end));\n        };\n\n        loadNext();\n\n        let ret = i.promise();\n        ret.abort = function () {\n            fr && fr.abort();\n            spark = null;\n            fr = null;\n        };\n\n        return ret;\n    }\n}\n\nmodule.exports = Html5Runtime;\n\n\n// WEBPACK FOOTER //\n// ./src/html5/runtime.js","const Emitter = require('./emitter');\nconst Events = require('./events');\nconst {Deferred} = require('./util');\nconst {NetworkError} = require('./errors');\n\nclass Runtime extends Emitter {\n    md5(blob) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getAsDataUrl(file, timeout) {\n        var i = Deferred();\n        i.reject();\n        return i.promise();\n    }\n    getTransport() {\n        return null;\n    }\n    getUploading() {\n        if (!this.uploading) {\n            this.uploading = new Uploading(this);\n        }\n        return this.uploading;\n    }\n    canSlice() {\n        return false;\n    }\n    slice(blob) {\n        throw new Error('this runtime current not support slice');\n    }\n\n    cancel(blob) {\n\n    }\n}\n\nmodule.exports = Runtime;\n\nclass Uploading {\n    constructor(runtime) {\n        this.runtime = runtime;\n    }\n\n    /**\n     * @param {FileRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(),\n            file = request.getFile(),\n            runtime = this.runtime;\n\n        let source = file.getSource(), size = file.size,\n            chunkSize = request.getChunkSize(),\n            useChunk = request.isChunkEnable(),\n            threads = Math.max(request.getChunkProcessThreads(), 1),\n            start = 0, end = 0, slots = [];\n\n        const getActives = () => {\n            return slots.reduce((sum, slot) => sum + (slot.state() === 'pending' ? 1 : 0), 0);\n        };\n\n        const readChunk = () => {\n            let slot, req, blob;\n            while (end < size && getActives() < threads) {\n                start = end;\n                end = Math.min(end + chunkSize, size);\n                blob = runtime.slice(source, start, end);\n                req = request.createChunkRequest(slots.length, blob);\n                req.setHeader('Content-Range', 'bytes ' + start + '-' + (end - 1) + '/' + size);\n                slot = this.slot(req, request.getChunkRetries());\n                slot.progress(progress).done(done).fail(fail);\n                slots.push(slot);\n            }\n        };\n\n        const progress = () => {\n            let total = size - end, loaded = 0;\n            slots.forEach((slot) => {\n                total += slot.total;\n                loaded += slot.loaded;\n            });\n            i.notify({total, loaded});\n        };\n\n        const done = (res) => {\n            useChunk && readChunk();\n\n            if (end >= size && slots.every((slot) => slot.state() === 'resolved')) {\n                i.resolve(res);\n            }\n        };\n\n        const abort = () => {\n            slots.forEach((slot) => slot.abort());\n        };\n\n        const fail = (error) => {\n            i.reject(error);\n            abort();\n        };\n\n        if (useChunk) {\n            readChunk();\n        } else {\n            end = size;\n            let slot = this.slot(request.createChunkRequest(), 0);\n            slot.progress(progress).done(done).fail(fail);\n            slots.push(slot);\n        }\n\n        let ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n\n    slot(request, retries) {\n        let i = Deferred(),\n            runtime = this.runtime,\n            core = request.getFile().getCore();\n\n        let ret = i.promise();\n\n        const progress = (e) => {\n            if (e.total) {\n                ret.total = e.total;\n            }\n            if (e.loaded) {\n                ret.loaded = e.loaded;\n            }\n            i.notify(e);\n        };\n\n        const process = () => {\n            var prepare, transport, completion;\n            ret.abort = function () {\n                prepare && prepare.abort();\n                transport && transport.abort();\n                completion && completion.abort();\n            };\n            ret.total = request.getBlob().size;\n            ret.loaded = 0;\n\n            prepare = core.invoke(Events.CHUNK_UPLOAD_PREPARING, request);\n\n            prepare.then((request) => {\n                transport = runtime.getTransport().generate(request);\n                transport.progress(progress);\n                return transport;\n            }).then((response) => {\n                completion = core.invoke(Events.CHUNK_UPLOAD_COMPLETING, request.createChunkResponse(response));\n                return completion;\n            }).done(i.resolve).fail(error);\n        };\n\n        const error = (e) => {\n            if (e instanceof NetworkError && retries-- > 0) {\n                // retry\n                setTimeout(process, 500);\n            } else {\n                i.reject(e);\n            }\n            ret.abort();\n        };\n\n        process();\n\n        return ret;\n    }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/runtime.js","const {Deferred} = require('../util');\nconst {TimeoutError, AbortError, NetworkError} = require('../errors');\n\nclass Html5Transport {\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred();\n        const xhr = new XMLHttpRequest;\n\n        let timeoutTimer;\n\n        const clean = () => {\n            xhr.onload = xhr.onerror = null;\n            if (xhr.upload) {\n                xhr.upload.onprogress = null;\n            }\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n\n        const abort = () => {\n            clean();\n            try {\n                xhr.abort();\n            } catch (e) {}\n        };\n\n        const complete = (e) => {\n            clean();\n            if (!xhr.status && e.type === 'error') {\n                return i.reject(new AbortError(e.message));\n            }\n            if (xhr.status === 0 || xhr.status === 304 || xhr.status >= 200 && xhr.status < 300) {\n                return i.resolve(xhr.responseText);\n            }\n            return i.reject(new NetworkError(xhr.status, xhr.statusText));\n        };\n\n        if (xhr.upload) {\n            xhr.upload.onprogress = (e) => i.notify(e);\n        }\n        xhr.onerror = complete;\n        xhr.onload = complete;\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            xhr.open('POST', request.getUrl(), true);\n            if (request.isWithCredentials()) {\n                xhr.withCredentials = true;\n            }\n\n            request.getHeaders().forEach((header) => xhr.setRequestHeader(header.name, header.value));\n\n            const formData = new FormData;\n\n            request.getParams().toArray().forEach((param) => formData.append(param.name, param.value));\n\n            formData.append(request.getName(), request.getBlob(), request.getBlobName());\n\n            xhr.send(formData);\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\nmodule.exports = Html5Transport;\n\n\n// WEBPACK FOOTER //\n// ./src/html5/transport.js","const Emitter = require('./emitter');\nconst Events = require('./events');\nconst {Deferred} = require('./util');\nconst {Status, StatusName} = require('./status');\nconst HTML5Runtime = require('./html5/runtime');\n\nlet uid = 0;\nfunction guid() {\n    return 'FILE-' + (uid++).toString(16).toUpperCase();\n}\n\nconst RE_EXT = /\\.([^.]+)$/, RE_IMAGE = /^image\\/(jpg|jpeg|png|gif|bmp|webp)$/i;\nfunction guessExt(blob) {\n    let m = blob.name && RE_EXT.exec(blob.name);\n    if (m) {\n        return m[1];\n    }\n    m = blob.type && RE_IMAGE.exec(blob.type);\n    if (m) {\n        return m[1];\n    }\n    return '';\n}\n\nfunction guessType(ext) {\n    if (['jpg','jpeg','png','gif','bmp','webp'].indexOf(ext.toLowerCase()) > -1) {\n        return 'image/' + (ext === 'jpg' ? 'jpeg' : ext);\n    }\n    return null;\n}\n\nclass Progress {\n    constructor(total, loaded) {\n        this.change(total, loaded);\n    }\n\n    change(total, loaded) {\n        this.total = total;\n        this.loaded = loaded || 0;\n        this.percentage = this.loaded === this.total ? 100 : Math.ceil(this.loaded / this.total * 100)\n    }\n\n    done() {\n        this.change(this.total, this.total);\n    }\n}\n\nclass File extends Emitter {\n    constructor(runtime, source, filename) {\n        super();\n\n        this.id = guid();\n\n        this.name = source.name || filename || this.id;\n\n        var ext = guessExt(source).toLowerCase();\n\n        if (ext && !RE_EXT.test(this.name)) {\n            this.name += '.' + ext;\n        }\n\n        this.ext = ext;\n\n        this.type = source.type || guessType(this.ext) || 'application/octet-stream';\n\n        this.lastModified = source.lastModified || (+new Date);\n\n        this.size = source.size || 0;\n\n        this.runtime = runtime || HTML5Runtime.getInstance();\n\n        this.source = source;\n\n        this.status = Status.INITED;\n\n        this.progress = new Progress(this.size, 0);\n    }\n\n    getCore() {\n        return this.core;\n    }\n\n    setCore(core) {\n        this.core = core;\n        this.setPropagationTarget(core);\n    }\n\n    getRuntime() {\n        return this.runtime;\n    }\n\n    isImage() {\n        return RE_IMAGE.test(this.type);\n    }\n\n    setStatus(status, silent) {\n        let prevStatus = this.status;\n\n        if (prevStatus !== Status.CANCELLED && status !== prevStatus) {\n            this.status = status;\n            !silent && this.emit(Events.FILE_STATUS_CHANGE, status, prevStatus);\n        }\n    }\n\n    getStatus() {\n        return this.status;\n    }\n\n    getStatusName() {\n        if (this.status in StatusName) {\n            return StatusName[this.status];\n        } else {\n            return 'unknow';\n        }\n    }\n\n    getSource() {\n        return this.source;\n    }\n\n    getAsDataUrl(timeout) {\n        if (!this._dataUrlPromise) {\n            this._dataUrlPromise = this.runtime.getAsDataUrl(this.source, timeout);\n        }\n        return this._dataUrlPromise;\n    }\n\n    md5() {\n        if (!this._md5Promise) {\n            this._md5Promise = this.runtime.md5(this.source);\n        }\n        return this._md5Promise;\n    }\n\n    session() {\n        if (this._sessionPromise) {\n            return this._sessionPromise;\n        }\n\n        let ret = Deferred();\n\n        ret.progress((progress) => {\n            this.setStatus(Status.PROGRESS);\n            this.emit(Events.FILE_UPLOAD_PROGRESS, progress);\n        }).done((response) => {\n            this.response = response;\n            this._session = null;\n            this._sessionPromise = null;\n            this._flows = [];\n            this.setStatus(Status.SUCCESS);\n            this.emit(Events.FILE_UPLOAD_SUCCESS, response);\n        }).fail((error) => {\n            this._session = null;\n            this._sessionPromise = null;\n            let flow;\n            while (flow = this._flows.shift()) {\n                flow.abort();\n            }\n\n            if (error instanceof Error) {\n                this.setStatus(Status.ERROR);\n                this.emit(Events.FILE_UPLOAD_ERROR, error);\n            }\n        }).always(() => {\n            this.emit(Events.FILE_UPLOAD_COMPLETED, this.getStatus());\n        });\n\n        this._flows = [];\n        this._session = ret;\n        this._sessionPromise = ret.promise();\n\n        return this._sessionPromise;\n    }\n\n    prepare() {\n        if (this.status !== Status.PENDING || !this.core) {\n            return false;\n        }\n\n        this.session();\n        this.setStatus(Status.PROGRESS);\n\n        this.emit(Events.FILE_UPLOAD_START);\n\n        this.request = this.core.createFileRequest(this);\n\n        let ret = this.core.invoke(Events.FILE_UPLOAD_PREPARING, this.request);\n\n        this._flows.push(ret);\n\n        ret.then((request) => {\n            this.emit(Events.FILE_UPLOAD_PREPARED, request);\n\n            const upload = this.runtime.getUploading().generate(request);\n\n            this._flows.push(upload);\n\n            upload.progress((e) => {\n                this.progress.change(e.total, e.loaded);\n                this._session.notify(this.progress);\n            });\n\n            return upload;\n        }).then((response) => this.complete(response), this._session.reject);\n\n        return true;\n    }\n\n    complete(response) {\n        if (this.status !== Status.PROGRESS) return;\n\n        let flow;\n        while (flow = this._flows.shift()) {\n            flow.abort();\n        }\n\n        this.progress.done();\n        this._session.notify(this.progress);\n\n        response = this.request.createFileResponse(response);\n\n        this.setStatus(Status.END);\n        this.emit(Events.FILE_UPLOAD_END);\n\n        let ret = this.core.invoke(Events.FILE_UPLOAD_COMPLETING, response);\n\n        this._flows.push(ret);\n\n        ret.then(this._session.resolve, this._session.reject);\n    }\n\n    pending() {\n        if (this.status === Status.ERROR || this.status === Status.QUEUED) {\n            this.progress.change(this.size, 0);\n            this.setStatus(Status.PENDING);\n        }\n    }\n\n    abort() {\n        this._session && this._session.reject();\n        this._session = null;\n        this._sessionPromise = null;\n    }\n\n    cancel(silent) {\n        this.setStatus(Status.CANCELLED, silent);\n        !silent && this.emit(Events.FILE_CANCEL);\n        this.abort();\n        this.runtime.cancel(this.source);\n        this._dataUrlPromise && this._dataUrlPromise.abort();\n        this._md5Promise && this._md5Promise.abort && this._md5Promise.abort();\n        this.removeAllListeners();\n    }\n\n    destroy() {\n        this.cancel();\n    }\n}\n\nmodule.exports = File;\n\n\n// WEBPACK FOOTER //\n// ./src/file.js","const Emitter = require('../emitter');\nconst Runtime = require('../html5/runtime');\nconst File = require('../file');\n\nclass PasteCollector {\n    constructor(core) {\n        this.core = core;\n        this.runtime = Runtime.getInstance();\n    }\n\n    addArea(area) {\n        const core = this.core,\n            runtime = this.runtime,\n            emitter = new Emitter;\n\n        const paste = (e) => {\n\n            const clipboardData = e.clipboardData || window.clipboardData,\n                items = clipboardData.items,\n                files = clipboardData.files;\n\n            if (!files && !items) {\n                return;\n            }\n\n            let prevent, i, l, file, item, addRet;\n\n            if (files && files.length) {\n                // safari has files\n                prevent = files.length > 0;\n                for (i = 0, l = files.length; i < l; i++) {\n                    file = new File(runtime, files[i]);\n\n                    prevent = 1;\n\n                    addRet = core.add(file);\n                    if (addRet < 0 || (addRet > 0 && !core.isMultiple())) {\n                        break;\n                    }\n                }\n            } else if (items && items.length) {\n                // chrome has items\n                let filename = clipboardData.getData('text/plain');\n                for (i = 0, l = items.length; i < l && !core.isLimit(); i++) {\n                    item = items[i];\n\n                    if (item.kind !== 'file' || !(file = item.getAsFile())) {\n                        continue;\n                    }\n\n                    file = new File(runtime, file, filename);\n                    filename = null;\n\n                    prevent = 1;\n\n                    addRet = core.add(file);\n                    if (addRet < 0 || (addRet > 0 && !core.isMultiple())) {\n                        break;\n                    }\n                }\n            }\n\n            if (prevent) {\n                e.preventDefault();\n                e.stopPropagation();\n                emitter.emit('paste', clipboardData);\n            }\n        };\n\n        if (('DataTransfer' in window) && ('FileList' in window) && area.addEventListener) {\n            area.addEventListener('paste', paste, false);\n        }\n\n        emitter.destroy = () => {\n            emitter.removeAllListeners();\n            if (area.removeEventListener) {\n                area.removeEventListener('paste', paste, false);\n            }\n        };\n\n        return emitter;\n    }\n}\n\nmodule.exports = PasteCollector;\n\n\n// WEBPACK FOOTER //\n// ./src/collector/paste.js","const Emitter = require('../emitter');\nconst Html5Runtime = require('../html5/runtime');\nconst FlashRuntime = require('../flash/runtime');\nconst File = require('../file');\nconst {extend} = require('../util');\n\n\nlet SWF_URL = '';\n\nconst createElement = (() => {\n    if (typeof document !== 'object') {\n        return;\n    }\n    \n    var div = document.createElement('div');\n    return function (html) {\n        div.innerHTML = html;\n        html = div.firstChild;\n        div.removeChild(html);\n        return html;\n    };\n})();\n\nclass FlashTriggerCollection {\n    constructor(core, onFiles) {\n        const overlay = createElement('<label style=\"position:fixed;left:-100px;top:-100px;width:50px;height:50px;display:block;cursor:pointer;overflow:hidden;z-index:99999;opacity:0;filter:alpha(opacity=0)\"></label>');\n\n        const runtime = new FlashRuntime(overlay, SWF_URL, () => {\n            return {\n                accept: core.getAccept(),\n                multiple: core.isMultiple()\n            };\n        });\n\n        runtime.on('select', (e) => {\n            onFiles(e.files, runtime);\n            this.current && this.current.emit('files', e.files, runtime);\n        });\n\n        runtime.on('rollOut', () => this.hideOverlay());\n\n        document.body.appendChild(overlay);\n        this.overlay = overlay;\n    }\n\n    hideOverlay() {\n        extend(this.overlay.style, {\n            left: '-100px',\n            top: '-100px',\n            width: '50px',\n            height: '50px'\n        });\n        if (this.current) {\n            this.current.emit('rollOut');\n            this.current = null;\n        }\n    }\n\n\n    add(trigger) {\n        const overlay = this.overlay, emitter = new Emitter;\n        const mouseover = () => {\n            const rect = trigger.getBoundingClientRect();\n            extend(overlay.style, {\n                left: rect.left + 'px',\n                top: rect.top + 'px',\n                width: (rect.right - rect.left) + 'px',\n                height: (rect.bottom - rect.top) + 'px'\n            });\n            emitter.emit('rollOver');\n            if (this.current && this.current !== emitter) {\n                this.current.emit('rollOut');\n            }\n            this.current = emitter;\n        };\n\n        if (trigger.addEventListener) {\n            trigger.addEventListener('mouseover', mouseover, false);\n        } else if (trigger.attachEvent) {\n            trigger.attachEvent(\"onmouseover\", mouseover);\n        }\n\n        emitter.destroy = () => {\n            if (this.current === emitter) {\n                this.hideOverlay();\n            }\n            emitter.removeAllListeners();\n            if (trigger.removeEventListener) {\n                trigger.removeEventListener('mouseover', mouseover, false);\n            } else if (trigger.detachEvent) {\n                trigger.detachEvent(\"onmouseover\", mouseover);\n            }\n        };\n\n        return emitter;\n    }\n}\n\nclass Html5Trigger extends Emitter {\n    constructor(trigger, core, onFiles) {\n        super();\n\n        this.trigger = trigger;\n        this.core = core;\n        this.label = createElement('<label style=\"position:absolute;top:0;left:0;width:100%;height:100%;display:inline-block;cursor:pointer;background:#fff;overflow:hidden;opacity:0\"></label>');\n\n        this.onChange = (e) => {\n            onFiles(e.target.files);\n            this.destroyInput();\n            this.createInput();\n        };\n        trigger.appendChild(this.label);\n        this.createInput();\n    }\n\n    createInput() {\n        const input = createElement('<input type=\"file\" style=\"position:absolute;clip:rect(1px 1px 1px 1px);\" />');\n\n        let accept = this.core.getAccept();\n        if (accept && accept.length > 0) {\n            accept = accept.map((item) => {\n                return item.mimeTypes || ('.' + item.extensions.join(',.'));\n            });\n\n            input.setAttribute('accept', accept.join(','));\n        }\n        if (this.core.isMultiple()) {\n            input.setAttribute('multiple', 'multiple');\n        }\n\n        input.addEventListener('change', this.onChange, false);\n\n        this.label.appendChild(input);\n        this.input = input;\n    }\n\n    destroyInput() {\n        if (!this.input) return;\n        this.input.removeEventListener('change', this.onChange, false);\n        this.label.removeChild(this.input);\n        this.input = null;\n    }\n\n    destroy() {\n        this.destroyInput();\n        this.removeAllListeners();\n        this.trigger.removeChild(this.label);\n    }\n}\n\nclass Html5TriggerCollection {\n    constructor(core, onFiles) {\n        const runtime = Html5Runtime.getInstance();\n        this.core = core;\n        this.onFiles = (files) => {\n            onFiles(files, runtime);\n        };\n    }\n\n    add(trigger) {\n        return new Html5Trigger(trigger, this.core, this.onFiles);\n    }\n}\n\nclass PickerCollector {\n    static setSWF(url) {\n        SWF_URL = url;\n    }\n    constructor(core) {\n\n        const onFiles = (files, runtime) => {\n            for (let i = 0, l = files.length; i < l; i++) {\n                if (core.add(new File(runtime, files[i])) < 0) {\n                    break;\n                }\n            }\n        };\n\n        if (window.File && window.FileList && window.FileReader) {\n            this.triggerCollection = new Html5TriggerCollection(core, onFiles);\n        } else {\n            this.triggerCollection = new FlashTriggerCollection(core, onFiles);\n        }\n    }\n\n    addArea(area) {\n        return this.triggerCollection.add(area);\n    }\n}\n\nmodule.exports = PickerCollector;\n\n\n// WEBPACK FOOTER //\n// ./src/collector/picker.js","const Runtime = require('../runtime');\nconst Transport = require('./transport');\n\nfunction getFlashVersion() {\n    let version;\n\n    try {\n        version = navigator.plugins['Shockwave Flash'];\n        version = version.description;\n    } catch (e1) {\n        try {\n            version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');\n        } catch (e2) {\n            version = '0.0';\n        }\n    }\n    version = version.match(/\\d+/g);\n    return parseFloat(version[0] + '.' + version[1]);\n}\n\nfunction callFlash(movie, functionName, argumentArray) {\n    try {\n        movie.CallFunction('<invoke name=\"' + functionName + '\" returntype=\"javascript\">' + __flash__argumentsToXML(argumentArray || [], 0) + '</invoke>');\n    } catch (ex) {\n        throw \"Call to \" + functionName + \" failed\";\n    }\n}\n\nfunction createFlash(swf, callInterface) {\n    if (getFlashVersion() < 11.4) {\n        throw 'flash player is not available';\n    }\n    const div = document.createElement('div');\n    let url = swf + (swf.indexOf('?') > 0 ? '&' : '?') + 'callInterface=' + encodeURIComponent(callInterface);\n    let attrs = [\n        'id=\"' + callInterface + '-Picker\"',\n        'type=\"application/x-shockwave-flash\"',\n        'data=\"' + url + '\"',\n        'width=\"100%\" height=\"100%\"',\n        'style=\"position:absolute;left:0;top:0;display:block;z-index:1;outline:0\"'\n    ];\n    if (window.ActiveXObject) {\n        attrs.push('classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"');\n    }\n    div.innerHTML = '<object ' + attrs.join(' ') + '>' +\n        '<param name=\"movie\" value=\"' + url + '\" />' +\n        '<param name=\"wmode\" value=\"transparent\" />' +\n        '<param name=\"allowscriptaccess\" value=\"always\" />' +\n    '</object>';\n\n    return div.firstChild;\n}\n\nlet _guid = +new Date;\nfunction guid(prefix) {\n    let ret = prefix + (_guid++).toString(16);\n    if (ret in window) {\n        return guid(prefix);\n    }\n    return ret;\n}\n\nclass FlashRuntime extends Runtime {\n    constructor(trigger, swf, options) {\n        super();\n\n        const callInterface = guid('FlashRuntime');\n\n        this.callInterface = callInterface;\n        window[callInterface] = this;\n\n        this.options = options;\n\n        const _this = this;\n        function display() {\n            let w = trigger.offsetWidth, h = trigger.offsetHeight, flash;\n            if (!w || !h || !(flash = createFlash(swf, callInterface))) {\n                setTimeout(display, 1000);\n                return;\n            }\n\n            trigger.appendChild(_this.flash = flash);\n        }\n\n        display();\n    }\n    getOptions() {\n        let options = this.options;\n        if (typeof options === 'function') {\n            options = options();\n        }\n        return options;\n    }\n    getTransport(name, blob, options) {\n        return new Transport(this, name, blob, options);\n    }\n    send(name, blob, url, params) {\n        callFlash(this.flash, 'exec', ['send', name, blob.id, url, params]);\n    }\n    abort(blob) {\n        try {\n            callFlash(this.flash, 'exec', ['abort', blob.id]);\n        } catch (e) {}\n    }\n    cancel(blob) {\n        callFlash(this.flash, 'exec', ['cancel', blob.id]);\n    }\n    ping() {\n        callFlash(this.flash, 'exec', ['pang']);\n    }\n    destroy() {\n        delete window[this.callInterface];\n    }\n}\n\nmodule.exports = FlashRuntime;\n\n\n// WEBPACK FOOTER //\n// ./src/flash/runtime.js","const {Deferred} = require('../util');\nconst {TimeoutError, AbortError, NetworkError} = require('../errors');\n\nclass FlashTransport {\n    constructor(flashRuntime) {\n        this.flashRuntime = flashRuntime;\n    }\n\n    /**\n     * @param {ChunkRequest} request\n     * @returns {*}\n     */\n    generate(request) {\n        const i = Deferred(), flashRuntime = this.flashRuntime, blob = request.getBlob();\n\n        let timeoutTimer;\n\n        const clean = () => {\n            flashRuntime.off('uploadprogress', progress);\n            flashRuntime.off('uploadcomplete', complete);\n            flashRuntime.off('uploaderror', error);\n            if (timeoutTimer) {\n                clearTimeout(timeoutTimer);\n            }\n        };\n        const abort = () => {\n            clean();\n            flashRuntime.abort(blob.id);\n        };\n\n        const progress = (e) => {\n            if (e.id !== blob.id) return;\n            i.notify(e);\n        };\n\n        const complete = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            if (e.status === 304 || e.status >= 200 && e.status < 300) {\n                flashRuntime.cancel(blob);\n                return i.resolve(e.response);\n            }\n            return i.reject(new NetworkError(e.status, e.response));\n        };\n\n        const error = (e) => {\n            if (e.id !== blob.id) return;\n            clean();\n            i.reject(new AbortError(e.message));\n        };\n        flashRuntime.on('uploadprogress', progress);\n        flashRuntime.on('uploadcomplete', complete);\n        flashRuntime.on('uploaderror', error);\n\n        // Timeout\n        const timeout = request.getTimeout();\n        if (timeout > 0) {\n            timeoutTimer = setTimeout(() => {\n                abort();\n                i.reject(new TimeoutError('timeout:'+timeout));\n            }, timeout);\n        }\n\n        try {\n            flashRuntime.send(request.getName(), blob, request.getUrl(), request.getParams().toString());\n        } catch (e) {\n            abort();\n            i.reject(new AbortError(e.message));\n        }\n\n        const ret = i.promise();\n        ret.abort = abort;\n\n        return ret;\n    }\n}\n\nmodule.exports = FlashTransport;\n\n\n// WEBPACK FOOTER //\n// ./src/flash/transport.js"],"sourceRoot":""}